---
layout: post
title: Analysing OSM data for planning purposes - not so easy
date: 2016-02-18 12:07:17.000000000 +01:00
type: post
published: true
status: publish
categories:
- Progress
tags:
- OSM
- osm2pgsql
- postgis
meta:
  _publicize_done_13100138: '1'
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _publicize_job_id: '19928582975'
  _publicize_done_external: a:1:{s:7:"twitter";a:1:{i:13074982;s:60:"https://twitter.com/CiaranStaunton/status/700290496720048128";}}
  _wpas_done_13074982: '1'
  publicize_twitter_user: CiaranStaunton
author:
  login: rusty1052
  email: rustybroderick@gmail.com
  display_name: rusty1052
  first_name: ''
  last_name: ''
---
<p class="p1">It’s just so easy to add new features and edit those existing on <b>openstreetmap</b> with it’s impressive number of tools including iD and JOSM. Little know though is the vast array of little tools which have been created for extracting and working with that wonderful open geo data.</p>
<p class="p1">This last week has been eye opening for me once again, I have been working with a small group of assistant physical planners on how we get hold of an extract of OSM for Lesotho, how do we load this into our chosen GIS tool (postGIS) and finally what sorts of exploratory analysis is possible.</p>
<p class="p1">Thanks to the lovely folks at <b>geofabrik</b> we have a daily Lesotho OSM extract. It takes the form of an osm.pbf file.</p>
<p class="p1">It was a week of new experiences for all the APPs, they had for one never touched the command line before. Something you really need to know if you want to use <b>osm2pgsql</b> to get your pbf file into your database.</p>
<p class="p1">Each day they will download the <strong>lesotho-latest.osm.pbf</strong> file from <a href="http://download.geofabrik.de/africa/lesotho.html">geofabrik</a> and open up the command line to run the following:</p>
<pre class="p3">osm2pgsql -c -d lesotho0902 -U colinbroderick -H localhost --hstore  --slim --number-processes 10 --extra-attributes -C 10000 1602-lesotho-latest.osm.pbf</pre>
<p class="p1">This creates at least 3 database tables one for each of the geometry types present in OSM:</p>
<ul class="ul1">
<li class="li1">planet_osm_point</li>
<li class="li1">planet_osm_line</li>
<li class="li1">planet_osm_polygon</li>
</ul>
<p class="p1"><img class="alignnone  wp-image-1693" src="{{ site.baseurl }}/assets/screen-shot-2016-02-18-at-10-48-29.png" alt="Screen Shot 2016-02-18 at 10.48.29" width="298" height="80" /></p>
<p class="p1">We are now able to easily perform some high level spatial analysis using the data in each of these tables.</p>
<p class="p1">Have you used the command line before? It’s not so easy to get started with right? After a rocky start all our guys are flying along with it now, it’s no longer scary! They are updating the database everyday!</p>
<p class="p1"><img class="alignnone size-full wp-image-1695" src="{{ site.baseurl }}/assets/img_1259.jpg" alt="IMG_1259.JPG" width="3264" height="2448" /></p>
<p class="p1">We chose to take on the challenge of training the APP’s to use PostGIS for their analysis as it we felt it was the most performant for them to work between periods of online connectivity.</p>
<p class="p1"><strong>Watch out for some details of the spatial analysis that will be falling out of these five newly trained spatial analysts!</strong></p>
<p class="p1"><strong>Find out more on how you can get your own Lesotho database <a href="https://github.com/rustyb/lesotho_manual/wiki/Using-osm-with-postgis---importing-data">on our analysis wiki</a></strong></p>
